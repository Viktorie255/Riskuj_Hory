import React, { useState } from "react";
import "./App.css"; // Pro základní styly

const topics = [
  {
    name: "Historie",
    questions: [
      { points: 100, question: "Kdy začala 2. světová válka?", answer: "1939" },
      { points: 200, question: "Kdo byl prvním českým prezidentem?", answer: "Tomáš Garrigue Masaryk" },
      { points: 300, question: "Kdy byla podepsána Magna Charta?", answer: "1215" },
      { points: 400, question: "Kdo objevil Ameriku?", answer: "Kryštof Kolumbus" },
      { points: 500, question: "V jakém roce padla Bastila?", answer: "1789" },
    ],
  },
  {
    name: "Věda",
    questions: [
      { points: 100, question: "Kolik planet má sluneční soustava?", answer: "8" },
      { points: 200, question: "Kdo objevil gravitaci?", answer: "Isaac Newton" },
      { points: 300, question: "Jaký je chemický symbol zlata?", answer: "Au" },
      { points: 400, question: "Kolik procent vody pokrývá Zemi?", answer: "71%" },
      { points: 500, question: "Jaká je nejtvrdší přírodní látka?", answer: "Diamant" },
    ],
  },
  {
    name: "Sport",
    questions: [
      { points: 100, question: "Kolik hráčů je v týmu ve fotbale?", answer: "11" },
      { points: 200, question: "Kde se konaly olympijské hry 2008?", answer: "Peking" },
      { points: 300, question: "Kdo má nejvíc titulů ve Formuli 1?", answer: "Lewis Hamilton / Michael Schumacher" },
      { points: 400, question: "Kolik setů se hraje v mužském grandslamovém tenisu?", answer: "5" },
      { points: 500, question: "Jaký sport se hraje na Wimbledon?", answer: "Tenis" },
    ],
  },
  {
    name: "Zeměpis",
    questions: [
      { points: 100, question: "Hlavní město Francie?", answer: "Paříž" },
      { points: 200, question: "Největší kontinent?", answer: "Asie" },
      { points: 300, question: "Kolik oceánů je na Zemi?", answer: "5" },
      { points: 400, question: "Nejvyšší hora světa?", answer: "Mount Everest" },
      { points: 500, question: "Jaký stát má nejvíce obyvatel?", answer: "Čína" },
    ],
  },
  {
    name: "Filmy",
    questions: [
      { points: 100, question: "Kdo režíroval film Titanic?", answer: "James Cameron" },
      { points: 200, question: "Který herec hrál Jacka Sparrowa?", answer: "Johnny Depp" },
      { points: 300, question: "Nejvýdělečnější film všech dob?", answer: "Avatar" },
      { points: 400, question: "Jak se jmenuje hlavní postava v Matrixu?", answer: "Neo" },
      { points: 500, question: "Kdo složil hudbu k Hvězdným válkám?", answer: "John Williams" },
    ],
  },
];

function App() {
  const [selectedQuestion, setSelectedQuestion] = useState(null);
  const [showAnswer, setShowAnswer] = useState(false);
  const [team1Points, setTeam1Points] = useState(0);
  const [team2Points, setTeam2Points] = useState(0);
  const [answeredQuestions, setAnsweredQuestions] = useState(new Set());

  const handleQuestionClick = (topicIndex, questionIndex) => {
    const questionKey = `${topicIndex}-${questionIndex}`;
    if (!answeredQuestions.has(questionKey)) {
      setSelectedQuestion({ ...topics[topicIndex].questions[questionIndex], topic: topics[topicIndex].name });
      setShowAnswer(false);
    }
  };

  const handleAnswer = (team) => {
    if (selectedQuestion) {
      const questionKey = `${topics.findIndex(t => t.name === selectedQuestion.topic)}-${topics.find(t => t.name === selectedQuestion.topic).questions.findIndex(q => q.question === selectedQuestion.question)}`;
      setAnsweredQuestions(new Set([...answeredQuestions, questionKey]));
      if (team === 1) setTeam1Points(team1Points + selectedQuestion.points);
      else setTeam2Points(team2Points + selectedQuestion.points);
      setSelectedQuestion(null);
    }
  };

  return (
    <div className="app">
      <h1>Riskuj!</h1>
      <div className="scoreboard">
        <h2>Tým 1: {team1Points} bodů</h2>
        <h2>Tým 2: {team2Points} bodů</h2>
      </div>
      <div className="board">
        {topics.map((topic, topicIndex) => (
          <div key={topicIndex} className="column">
            <h3>{topic.name}</h3>
            {topic.questions.map((q, questionIndex) => {
              const questionKey = `${topicIndex}-${questionIndex}`;
              return (
                <button
                  key={questionIndex}
                  onClick={() => handleQuestionClick(topicIndex, questionIndex)}
                  disabled={answeredQuestions.has(questionKey)}
                >
                  {answeredQuestions.has(questionKey) ? "✅" : q.points}
                </button>
              );
            })}
          </div>
        ))}
      </div>

      {selectedQuestion && (
        <div className="modal">
          <h2>{selectedQuestion.question}</h2>
          <button onClick={() => setShowAnswer(true)}>Zobrazit odpověď</button>
          {showAnswer && <h3>Správná odpověď: {selectedQuestion.answer}</h3>}
          <button onClick={() => handleAnswer(1)}>Tým 1 správně</button>
          <button onClick={() => handleAnswer(2)}>Tým 2 správně</button>
        </div>
      )}
    </div>
  );
}
